webpackJsonp([0],{0:function(t,e){},"7zck":function(t,e){},Cr04:function(t,e){},LKsS:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("7+uW"),i=r("8+8L"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",[e("router-view")],1)},staticRenderFns:[]};var s=r("VU/8")({name:"App"},n,!1,function(t){r("dyzD")},null,null).exports,o=r("/ocq"),l={data:function(){var t=this;return{valid:!1,user:{username:"",password:"",email:""},submitError:"",submitting:!1,register:!1,usernameRules:[function(t){return!!t||"Username is required"}],passwordRules:[function(t){return!!t||"Password is required"}],emailRules:[function(t){return!!t||"Email is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}],confirmPasswordRules:[function(e){return e===t.user.password||"Password must match"}],confirmEmailRules:[function(e){return e===t.user.email||"E-mail must match"}]}},methods:{onSubmit:function(t){var e=this;this.valid&&(this.submitting||(this.submitting=!0,this.$http.post(this.register?"/auth/register":"/auth/password",this.user).then(function(t){t.data&&t.data.Jwt&&(localStorage.setItem("jwt",t.data.Jwt),e.$router.push("/"))},function(t){e.submitting=!1,e.submitError=t.error})))}}},c={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-card-text",[t.submitError?r("label",{staticClass:"text-error"},[t._v(t._s(t.submitError))]):t._e(),t._v(" "),r("v-text-field",{attrs:{"prepend-icon":"person",label:"Username",type:"text",rules:t.usernameRules,required:""},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}}),t._v(" "),r("v-text-field",{attrs:{"prepend-icon":"lock",label:"Password",type:"password",rules:t.passwordRules,required:""},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),t._v(" "),r("transition",{attrs:{name:"slide-y-transition"}},[t.register?r("div",[r("v-text-field",{attrs:{"prepend-icon":"lock",label:"Confirm Password",type:"password",rules:t.confirmPasswordRules,required:""}}),t._v(" "),r("v-text-field",{attrs:{"prepend-icon":"email",label:"Email",type:"text",rules:t.emailRules,required:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),t._v(" "),r("v-text-field",{attrs:{"prepend-icon":"email",label:"Confirm Email",type:"text",rules:t.confirmEmailRules,required:""}})],1):t._e()])],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{disabled:!t.valid||t.submitting,color:"primary",type:"submit"}},[t._v(t._s(t.register?"Register":"Login"))]),t._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.register=!t.register}}},[t._v(t._s(t.register?"Sign In":"Sign Up"))])],1)],1)},staticRenderFns:[]},u={methods:{discordLogin:function(t){window.location.href="/auth/discord"}}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-card-actions",[e("v-spacer"),this._v(" "),e("v-btn",{attrs:{dark:"",color:"grey darken-3"},on:{click:this.discordLogin}},[e("v-avatar",{attrs:{size:"32px"}},[e("img",{attrs:{src:"https://discordapp.com/assets/28174a34e77bb5e5310ced9f95cb480b.png",alt:""}})]),this._v("\n    Login with Discord\n  ")],1)],1)},staticRenderFns:[]},d={components:{PasswordLogin:r("VU/8")(l,c,!1,null,null,null).exports,DiscordLogin:r("VU/8")(u,A,!1,null,null,null).exports}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-content",[e("v-container",{attrs:{fluid:"","fill-height":""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[e("v-card",{attrs:{"elevation-12":""}},[e("v-toolbar",{attrs:{dark:"",color:"primary"}},[e("v-toolbar-title",[this._v("Login to MoeBot")])],1),this._v(" "),e("PasswordLogin"),this._v(" "),e("DiscordLogin")],1)],1)],1)],1)],1)},staticRenderFns:[]},m=r("VU/8")(d,v,!1,null,null,null).exports,g={created:function(){var t=this;this.$http.post("/auth/discordOAuth",{code:this.$route.query.code,state:this.$route.query.state}).then(function(e){e.data&&e.data.Jwt&&(localStorage.setItem("jwt",e.data.Jwt),t.$router.push("/"))},function(e){t.$router.push("/")})}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-content",[e("v-container",{attrs:{fluid:"","fill-height":""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[e("v-card",{attrs:{"elevation-12":""}},[e("v-card-text",[e("div",{staticClass:"headline"},[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}),this._v("\n              Please wait...\n            ")],1)])],1)],1)],1)],1)],1)},staticRenderFns:[]};var h=r("VU/8")(g,p,!1,function(t){r("NiJK")},null,null).exports,f={data:function(){return{isLoading:!1,serverList:[{id:1,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAIUlEQVR42mPM+c9AEWAcNWDUgFEDRg0YNWDUgFEDhpsBAGTCLYFg4onKAAAAAElFTkSuQmCC"},{id:2,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAIUlEQVR42mPM+c9AEWAcNWDUgFEDRg0YNWDUgFEDhpsBAGTCLYFg4onKAAAAAElFTkSuQmCC"},{id:3,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAIUlEQVR42mPM+c9AEWAcNWDUgFEDRg0YNWDUgFEDhpsBAGTCLYFg4onKAAAAAElFTkSuQmCC"},{id:4,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAIUlEQVR42mPM+c9AEWAcNWDUgFEDRg0YNWDUgFEDhpsBAGTCLYFg4onKAAAAAElFTkSuQmCC"},{id:5,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAIUlEQVR42mPM+c9AEWAcNWDUgFEDRg0YNWDUgFEDhpsBAGTCLYFg4onKAAAAAElFTkSuQmCC"},{id:6,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAIUlEQVR42mPM+c9AEWAcNWDUgFEDRg0YNWDUgFEDhpsBAGTCLYFg4onKAAAAAElFTkSuQmCC"},{id:7,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAIUlEQVR42mPM+c9AEWAcNWDUgFEDRg0YNWDUgFEDhpsBAGTCLYFg4onKAAAAAElFTkSuQmCC"}]}},mounted:function(){var t=this;this.isLoading=!0,this.$http.get("/api/serverlist",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(function(e){t.isLoading=!1,t.serverList=e.data},function(e){t.serverList=[{id:1,icon:"/static/discordError.png"}],t.isLoading=!1})},methods:{test:function(){}}},E={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-list",{staticClass:"pt-0",attrs:{dense:""}},[r("v-divider"),t._v(" "),t._l(t.serverList,function(e){return r("v-list-tile",{key:e.id,class:{loading:t.isLoading},on:{click:t.test}},[r("v-list-tile-action",[r("v-tooltip",{attrs:{right:""}},[r("v-avatar",{attrs:{slot:"activator",size:"32px"},slot:"activator"},[r("img",{attrs:{src:e.icon}})]),t._v(" "),r("span",[t._v(t._s(e.name))])],1)],1)],1)})],2)},staticRenderFns:[]};var b={data:function(){return{isLoading:!1,user:{username:"",avatar:"/static/defaultDiscordAvatar.png"}}},mounted:function(){var t=this;this.isLoading=!0,this.$http.get("/api/user",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(function(e){t.isLoading=!1,t.user=e.data},function(e){t.isLoading=!1})}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-list",{staticClass:"pa-0"},[e("v-list-tile",{attrs:{avatar:""}},[e("v-list-tile-avatar",[this.isLoading?e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):e("img",{attrs:{src:this.user.avatar}})],1)],1)],1)},staticRenderFns:[]};var _={created:function(){this.heartbeatId=setInterval(this.heartbeat,3e5),this.heartbeat()},data:function(){return{heartbeatId:0}},methods:{logout:function(t){localStorage.removeItem("jwt"),this.$router.go(this.$router.currentRoute)},heartbeat:function(){var t=this;this.$http.get("/api/heartbeat",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(function(t){t.data&&t.data.Jwt&&localStorage.setItem("jwt",t.data.Jwt)},function(e){clearInterval(t.heartbeatId),localStorage.removeItem("jwt"),t.$router.go()})}},components:{ServerList:r("VU/8")(f,E,!1,function(t){r("fibd")},null,null).exports,UserAvatar:r("VU/8")(b,w,!1,function(t){r("ll4W")},null,null).exports}},U={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-navigation-drawer",{attrs:{app:"","mini-variant":""}},[r("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[r("UserAvatar")],1),t._v(" "),r("ServerList")],1),t._v(" "),r("v-toolbar",{attrs:{dark:"",color:"primary",app:""}},[r("v-toolbar-title",[t._v("MoeBot Website")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:t.logout}},[r("v-icon",[t._v("exit_to_app")])],1)],1),t._v(" "),r("v-content",[r("v-container",{attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var C=r("VU/8")(_,U,!1,function(t){r("LKsS")},null,null).exports,D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-flex",{attrs:{xs12:""}},[e("h1",[this._v("Welcome to MoeBot!")])])},staticRenderFns:[]};var R=r("VU/8")({},D,!1,function(t){r("Cr04")},null,null).exports;function F(){if(null!==localStorage.getItem("jwt"))return!0}a.a.use(o.a);var L=[{path:"/login",component:m,meta:{requiresAuth:!1}},{path:"/login/discord",component:h,meta:{requiresAuth:!1}},{path:"/login/reset"},{path:"/",component:C,meta:{requiresAuth:!0},children:[{path:"",component:R,meta:{requiresAuth:!0}}]}],x=new o.a({mode:"history",routes:L});x.beforeEach(function(t,e,r){null!=t.meta&&null!=t.meta.requiresAuth?t.meta.requiresAuth?F()?r():r("/login"):F()?r("/"):r():r()});var S=x,y=r("3EgV"),$=r.n(y),W=(r("7zck"),r("IHMs")),k=r.n(W);a.a.use($.a,{theme:{primary:k.a.purple.lighten1,secondary:k.a.purple.lighten3,accent:k.a.purple.accent2,error:k.a.red.accent3}}),a.a.use(i.a),new a.a({el:"#app",router:S,components:{App:s},template:"<App/>"}).$mount("#app")},NiJK:function(t,e){},dyzD:function(t,e){},fibd:function(t,e){},ll4W:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.702fc25f20aa630b1a71.js.map